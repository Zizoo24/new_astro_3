const searchIndex = [
    {
        title: "Legal Translation",
        url: "/services/legal-translation/",
        category: "Services",
        keywords: "legal translation moj certified court documents contracts agreements powers of attorney"
    },
    {
        title: "Golden Visa Translation",
        url: "/services/golden-visa-translation/",
        category: "Services",
        keywords: "golden visa uae residence permit investor entrepreneur specialist talent documents"
    },
    {
        title: "Attestation Services",
        url: "/services/attestation/",
        category: "Services",
        keywords: "attestation mofa ministry foreign affairs legalization apostille embassy"
    },
    {
        title: "Certificate Translation",
        url: "/services/certificate-translation/",
        category: "Services",
        keywords: "certificate birth marriage death degree diploma academic educational"
    },
    {
        title: "Corporate Translation",
        url: "/services/corporate-translation/",
        category: "Services",
        keywords: "corporate business company trade license memorandum articles association"
    },
    {
        title: "Dubai",
        url: "/locations/dubai/",
        category: "Locations",
        keywords: "dubai translation services all areas legal certified moj"
    },
    {
        title: "Palm Jumeirah",
        url: "/locations/dubai/palm-jumeirah/",
        category: "Locations",
        keywords: "palm jumeirah dubai translation service hnw high net worth luxury"
    },
    {
        title: "JLT - Jumeirah Lake Towers",
        url: "/locations/dubai/jlt/",
        category: "Locations",
        keywords: "jlt jumeirah lake towers free zone dmcc translation"
    },
    {
        title: "DIFC",
        url: "/locations/dubai/difc/",
        category: "Locations",
        keywords: "difc dubai international financial centre legal translation courts"
    },
    {
        title: "Business Bay",
        url: "/locations/dubai/business-bay/",
        category: "Locations",
        keywords: "business bay dubai downtown translation corporate"
    },
    {
        title: "Abu Dhabi",
        url: "/locations/abu-dhabi/",
        category: "Locations",
        keywords: "abu dhabi capital uae translation adgm"
    },
    {
        title: "Sharjah",
        url: "/locations/sharjah/",
        category: "Locations",
        keywords: "sharjah emirate translation services"
    },
    {
        title: "Legal Industry",
        url: "/industries/legal/",
        category: "Industries",
        keywords: "legal law firms lawyers attorneys court litigation"
    },
    {
        title: "Healthcare Industry",
        url: "/industries/healthcare/",
        category: "Industries",
        keywords: "healthcare medical hospital clinic doctors patients"
    },
    {
        title: "Real Estate Industry",
        url: "/industries/real-estate/",
        category: "Industries",
        keywords: "real estate property dld poa power of attorney"
    },
    {
        title: "E-commerce Industry",
        url: "/industries/e-commerce/",
        category: "Industries",
        keywords: "ecommerce online business digital marketplace"
    },
    {
        title: "Pricing Guide",
        url: "/resources/pricing-guide/",
        category: "Resources",
        keywords: "pricing price cost rates fees quote"
    },
    {
        title: "FAQ",
        url: "/resources/faq/",
        category: "Resources",
        keywords: "faq questions answers help support"
    },
    {
        title: "Document Checklist",
        url: "/resources/document-checklist/",
        category: "Resources",
        keywords: "documents checklist requirements prepare"
    },
    {
        title: "Golden Visa Checklist 2025",
        url: "/resources/golden-visa-checklist/",
        category: "Resources",
        keywords: "golden visa checklist 2025 investor entrepreneur specialist documents required"
    },
    {
        title: "UAE Attestation Guide 2025",
        url: "/resources/attestation-guide/",
        category: "Resources",
        keywords: "attestation guide mofa hague apostille legalization chain"
    },
    {
        title: "Contact Us",
        url: "/contact/",
        category: "Contact",
        keywords: "contact whatsapp email phone call quote"
    },
    {
        title: "Personal Documents",
        url: "/personal/",
        category: "Personal Documents",
        keywords: "personal documents certificates vital records immigration academic"
    },
    {
        title: "Vital Records",
        url: "/personal/vital-records/",
        category: "Personal Documents",
        keywords: "vital records birth marriage death divorce certificates"
    },
    {
        title: "Birth Certificate Translation",
        url: "/personal/vital-records/birth/",
        category: "Personal Documents",
        keywords: "birth certificate translation gdrfa sponsor child golden visa icp mofa"
    },
    {
        title: "Marriage Certificate Translation",
        url: "/personal/vital-records/marriage/",
        category: "Personal Documents",
        keywords: "marriage certificate translation spouse visa gdrfa sponsorship"
    },
    {
        title: "Divorce Certificate Translation",
        url: "/personal/vital-records/divorce/",
        category: "Personal Documents",
        keywords: "divorce certificate decree translation court family law"
    },
    {
        title: "Death Certificate Translation",
        url: "/personal/vital-records/death/",
        category: "Personal Documents",
        keywords: "death certificate translation estate inheritance probate"
    },
    {
        title: "Immigration Documents",
        url: "/personal/immigration/",
        category: "Personal Documents",
        keywords: "immigration documents visa residence permit sponsorship"
    },
    {
        title: "Police Clearance Certificate Translation",
        url: "/personal/immigration/pcc/",
        category: "Personal Documents",
        keywords: "police clearance pcc good conduct certificate fbi acro translation visa"
    },
    {
        title: "Bank Statement Translation",
        url: "/personal/immigration/bank/",
        category: "Personal Documents",
        keywords: "bank statement translation golden visa 6 months financial proof"
    },
    {
        title: "Driving License Translation",
        url: "/personal/immigration/license/",
        category: "Personal Documents",
        keywords: "driving license translation rta conversion dubai uae"
    },
    {
        title: "Academic Documents",
        url: "/personal/academic/",
        category: "Personal Documents",
        keywords: "academic documents degree diploma transcript equivalency"
    },
    {
        title: "University Degree Translation",
        url: "/personal/education/degree/",
        category: "Personal Documents",
        keywords: "degree diploma university translation attestation equivalency golden visa"
    },
    {
        title: "Transcript Translation",
        url: "/personal/academic/transcripts/",
        category: "Personal Documents",
        keywords: "transcript academic record grades university college translation"
    },
    {
        title: "Legal Documents",
        url: "/legal/",
        category: "Legal Documents",
        keywords: "legal documents contracts corporate litigation court"
    },
    {
        title: "Corporate Documents",
        url: "/legal/corporate/",
        category: "Legal Documents",
        keywords: "corporate documents company formation moa poa trade license"
    },
    {
        title: "Power of Attorney Translation",
        url: "/legal/corporate/poa/",
        category: "Legal Documents",
        keywords: "power of attorney poa translation general special dld property"
    },
    {
        title: "Memorandum of Association Translation",
        url: "/legal/corporate/moa/",
        category: "Legal Documents",
        keywords: "moa memorandum association translation company formation freezone"
    },
    {
        title: "Contracts",
        url: "/legal/contracts/",
        category: "Legal Documents",
        keywords: "contracts agreements legal binding nda employment lease"
    },
    {
        title: "NDA Translation",
        url: "/legal/contracts/nda/",
        category: "Legal Documents",
        keywords: "nda non disclosure agreement translation confidentiality ip"
    },
    {
        title: "Litigation Documents",
        url: "/legal/litigation/",
        category: "Legal Documents",
        keywords: "litigation court documents legal proceedings claims judgments"
    },
    {
        title: "Medical Report Translation",
        url: "/specialized/medical/",
        category: "Specialized",
        keywords: "medical report translation dha moh haad healthcare hospital"
    },
    {
        title: "Privacy Policy",
        url: "/privacy/",
        category: "Legal",
        keywords: "privacy policy data protection gdpr personal information"
    },
    {
        title: "Terms of Service",
        url: "/terms/",
        category: "Legal",
        keywords: "terms service conditions agreement legal"
    }
];

function performSearch(query) {
    if (!query || query.length < 2) return [];
    
    const searchTerms = query.toLowerCase().split(' ').filter(t => t.length > 1);
    
    const results = searchIndex.map(item => {
        let score = 0;
        
        searchTerms.forEach(term => {
            const titleLower = item.title.toLowerCase();
            const categoryLower = item.category.toLowerCase();
            
            if (titleLower === term) score += 20;
            else if (titleLower.includes(term)) score += 10;
            
            if (categoryLower.includes(term)) score += 5;
            if (item.keywords.includes(term)) score += 3;
        });
        
        return { ...item, score };
    }).filter(item => item.score > 0)
      .sort((a, b) => b.score - a.score)
      .slice(0, 8);
    
    return results;
}

function displaySearchResults(results, container) {
    if (!container) return;
    
    if (results.length === 0) {
        container.innerHTML = '<p class="no-results">No results found. Try different keywords or browse our quick links above.</p>';
        return;
    }
    
    const html = results.map(item => `
        <a href="${item.url}" class="search-result-item">
            <span class="result-category">${item.category}</span>
            <span class="result-title">${item.title}</span>
        </a>
    `).join('');
    
    container.innerHTML = html;
}

document.addEventListener('DOMContentLoaded', function() {
    const searchInput = document.getElementById('searchInput');
    const searchBtn = document.querySelector('.search-btn');
    
    let resultsContainer = document.getElementById('searchResults');
    if (!resultsContainer && searchInput) {
        resultsContainer = document.createElement('div');
        resultsContainer.id = 'searchResults';
        resultsContainer.className = 'search-results';
        searchInput.parentNode.after(resultsContainer);
    }
    
    function doSearch() {
        const query = searchInput ? searchInput.value : '';
        const results = performSearch(query);
        displaySearchResults(results, resultsContainer);
    }
    
    if (searchInput) {
        searchInput.addEventListener('input', doSearch);
        searchInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                doSearch();
            }
        });
    }
    
    if (searchBtn) {
        searchBtn.addEventListener('click', function(e) {
            e.preventDefault();
            doSearch();
        });
    }
});
