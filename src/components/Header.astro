---
interface Props {
  isHomepage?: boolean;
}

const { isHomepage = false } = Astro.props;
---

<!-- Desktop Header - Exodus Style -->
<header id="header" class:list={["header-desktop", "exodus-header", { "header-homepage": isHomepage }]}>
  <!-- Nav Shell - Exempt from global 80% scale -->
  <div class="nav-shell">
  <!-- Top Announcement Bar -->
  <div class="header-announcement">
    <div class="container announcement-flex">
      <span class="announcement-label">MOJ-Licensed Legal Translation</span>
      <div class="announcement-actions">
        <a href="https://wa.me/971508620217" class="announcement-btn announcement-btn--whatsapp"><i class="fab fa-whatsapp"></i> WhatsApp</a>
        <a href="tel:+971508620217" class="announcement-btn announcement-btn--call"><i class="fas fa-phone-alt"></i> Call</a>
        <a href="https://wa.me/971508620217" class="announcement-cta">Send Documents <i class="fas fa-arrow-right"></i></a>
      </div>
    </div>
  </div>
  <!-- Main Header - Transparent Overlay -->
  <div class="header-main">
    <div class="container">
      <div class="header-main-row">
        <div class="header-logo">
          <a href="/">
            <img src="/images/logo/brand/emblem-clean.png" alt="OnlineTranslation.ae" class="logo-img" loading="eager">
            <div class="logo-text-block">
              <span class="logo-text">Online<span class="logo-suffix">Translation</span><span class="logo-domain">.ae</span></span>
              <span class="logo-tagline">Boutique Legal Translation</span>
            </div>
          </a>
        </div>
        <nav class="header-nav" id="desktopNav">
          <ul class="nav-menu">
            <li class="nav-item has-dropdown">
              <a href="/" class="nav-link">Home</a>
            </li>
            <li class="nav-item has-dropdown mega-dropdown">
              <a href="/services/" class="nav-link">Services <i class="fas fa-chevron-down"></i></a>
              <ul class="dropdown-menu">
                <li class="dropdown-header">Translation Services</li>
                <li><a href="/services/legal-translation/">Legal Translation</a></li>
                <li><a href="/services/certificate-translation/">Certificate Translation</a></li>
                <li><a href="/services/corporate-translation/">Corporate Translation</a></li>
                <li><a href="/services/golden-visa-translation/">Golden Visa</a></li>
                <li><a href="/services/attestation/">Attestation & MOFAIC</a></li>
                <li class="dropdown-divider"></li>
                <li class="dropdown-header">Vital Records</li>
                <li><a href="/personal/vital-records/birth/">Birth Certificate</a></li>
                <li><a href="/personal/vital-records/marriage/">Marriage Certificate</a></li>
                <li><a href="/personal/vital-records/death/">Death Certificate</a></li>
                <li><a href="/personal/vital-records/divorce/">Divorce Certificate</a></li>
                <li class="dropdown-divider"></li>
                <li class="dropdown-header">Academic & Immigration</li>
                <li><a href="/personal/education/degree/">University Degree</a></li>
                <li><a href="/personal/academic/transcripts/">Academic Transcripts</a></li>
                <li><a href="/personal/immigration/pcc/">Police Clearance (PCC)</a></li>
                <li><a href="/personal/immigration/license/">Driving License</a></li>
                <li><a href="/personal/immigration/bank/">Bank Statements</a></li>
                <li class="dropdown-divider"></li>
                <li class="dropdown-header">Legal & Commercial</li>
                <li><a href="/legal/corporate/poa/">Power of Attorney</a></li>
                <li><a href="/legal/corporate/moa/">Memorandum of Association</a></li>
                <li><a href="/legal/contracts/nda/">NDA Translation</a></li>
                <li><a href="/specialized/medical/">Medical Reports</a></li>
              </ul>
            </li>
            <li class="nav-item has-dropdown">
              <a href="/locations/" class="nav-link">Locations <i class="fas fa-chevron-down"></i></a>
              <ul class="dropdown-menu">
                <li><a href="/locations/dubai/">Dubai (All Areas)</a></li>
                <li><a href="/locations/dubai/palm-jumeirah/">Palm Jumeirah</a></li>
                <li><a href="/locations/dubai/jlt/">JLT & DMCC</a></li>
                <li><a href="/locations/dubai/difc/">DIFC</a></li>
                <li><a href="/locations/dubai/business-bay/">Business Bay</a></li>
                <li><a href="/locations/abu-dhabi/">Abu Dhabi</a></li>
                <li><a href="/locations/sharjah/">Sharjah</a></li>
              </ul>
            </li>
            <li class="nav-item has-dropdown">
              <a href="/industries/" class="nav-link">Industries <i class="fas fa-chevron-down"></i></a>
              <ul class="dropdown-menu">
                <li><a href="/industries/legal/">Legal & Law Firms</a></li>
                <li><a href="/industries/healthcare/">Healthcare</a></li>
                <li><a href="/industries/real-estate/">Real Estate</a></li>
                <li><a href="/industries/e-commerce/">E-Commerce</a></li>
              </ul>
            </li>
            <li class="nav-item has-dropdown">
              <a href="/resources/" class="nav-link">Resources <i class="fas fa-chevron-down"></i></a>
              <ul class="dropdown-menu">
                <li><a href="/resources/faq/">FAQ</a></li>
                <li><a href="/resources/pricing-guide/">Pricing Guide</a></li>
                <li><a href="/resources/document-checklist/">Document Checklist</a></li>
                <li><a href="/resources/attestation-guide/">Attestation Guide</a></li>
                <li><a href="/resources/golden-visa-checklist/">Golden Visa Checklist</a></li>
              </ul>
            </li>
          </ul>
        </nav>
        <a href="/contact/" class="header-contact-btn">Contact</a>
        <div class="header-actions">
          <button type="button" id="themeToggle" class="header-icon" aria-label="Toggle theme" title="Toggle dark mode">
            <i class="fas fa-moon"></i>
          </button>
          <div class="social-icons">
            <a href="https://www.facebook.com/DXBTranslate/" target="_blank" rel="noopener" title="Facebook"><i class="fab fa-facebook-f"></i></a>
            <a href="https://www.instagram.com/onlinetranslation.ae" target="_blank" rel="noopener" title="Instagram"><i class="fab fa-instagram"></i></a>
            <a href="https://www.linkedin.com/company/online-translation-agency-dubai/" target="_blank" rel="noopener" title="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
          </div>
          <button type="button" class="menu-toggle-btn mobile-only" id="mobileMenuToggle" aria-label="Open menu" title="Menu"><i class="fas fa-bars"></i></button>
        </div>
      </div>
    </div>
  </div>
  </div><!-- /.nav-shell -->
</header>

<!-- Mobile Header - Shown on mobile devices -->
<div class="header-mobile">
  <button type="button" class="header-icon" id="sidebarToggle" aria-label="Open menu">
    <i class="fas fa-bars"></i>
  </button>
  <a href="/" class="header-title">OnlineTranslation<span>.ae</span></a>
  <button type="button" id="mobileThemeToggle" class="header-icon" aria-label="Toggle theme">
    <i class="fas fa-moon"></i>
  </button>
</div>

<script is:inline>
  (function() {
    // ========================================
    // Theme Toggle - Runs Immediately
    // ========================================
    
    const body = document.body;
    const html = document.documentElement;
    
    // Get saved theme or default to light
    const savedTheme = localStorage.getItem('theme') || 'light';
    body.classList.remove('theme-light', 'theme-dark');
    body.classList.add('theme-' + savedTheme);
    html.setAttribute('data-theme', savedTheme);
    
    // Update theme toggle icons
    function updateThemeIcons() {
      const isDark = body.classList.contains('theme-dark');
      const icon = isDark ? 'fa-sun' : 'fa-moon';
      
      const themeToggle = document.getElementById('themeToggle');
      const mobileThemeToggle = document.getElementById('mobileThemeToggle');
      
      if (themeToggle) {
        const desktopIcon = themeToggle.querySelector('i');
        if (desktopIcon) desktopIcon.className = 'fas ' + icon;
      }
      
      if (mobileThemeToggle) {
        const mobileIcon = mobileThemeToggle.querySelector('i');
        if (mobileIcon) mobileIcon.className = 'fas ' + icon;
      }
    }
    
    // Toggle theme function
    function toggleTheme(e) {
      e.preventDefault();
      const isDark = body.classList.contains('theme-dark');
      
      if (isDark) {
        body.classList.remove('theme-dark');
        body.classList.add('theme-light');
        html.setAttribute('data-theme', 'light');
        localStorage.setItem('theme', 'light');
      } else {
        body.classList.remove('theme-light');
        body.classList.add('theme-dark');
        html.setAttribute('data-theme', 'dark');
        localStorage.setItem('theme', 'dark');
      }
      
      updateThemeIcons();
    }
    
    // Attach listeners when DOM is ready
    document.addEventListener('DOMContentLoaded', function() {
      const themeToggle = document.getElementById('themeToggle');
      const mobileThemeToggle = document.getElementById('mobileThemeToggle');
      
      if (themeToggle) themeToggle.addEventListener('click', toggleTheme);
      if (mobileThemeToggle) mobileThemeToggle.addEventListener('click', toggleTheme);
      
      updateThemeIcons();
    });
    
    // Also try to attach immediately if DOM already loaded
    if (document.readyState !== 'loading') {
      const themeToggle = document.getElementById('themeToggle');
      const mobileThemeToggle = document.getElementById('mobileThemeToggle');
      
      if (themeToggle) themeToggle.addEventListener('click', toggleTheme);
      if (mobileThemeToggle) mobileThemeToggle.addEventListener('click', toggleTheme);
      
      updateThemeIcons();
    }
  })();
</script>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const header = document.getElementById('header');

    // Scroll behavior for header
    window.addEventListener('scroll', () => {
      const currentScroll = window.pageYOffset;
      if (currentScroll > 50) {
        header?.classList.add('scrolled');
      } else {
        header?.classList.remove('scrolled');
      }
    });

    // Desktop dropdown hover behavior
    const dropdownItems = document.querySelectorAll('.nav-item.has-dropdown');
    dropdownItems.forEach(item => {
      item.addEventListener('mouseenter', () => {
        item.classList.add('is-open');
      });
      item.addEventListener('mouseleave', () => {
        item.classList.remove('is-open');
      });
    });
  });
</script>
