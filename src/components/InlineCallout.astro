---
/**
 * InlineCallout.astro
 * Contextual callout boxes for inline service suggestions
 * 
 * Usage:
 * <InlineCallout 
 *   type="tip" 
 *   title="Need attestation?" 
 *   link="/services/attestation/"
 *   linkText="Learn about attestation services"
 * >
 *   Most translated documents require MOFAIC attestation for official use in the UAE.
 * </InlineCallout>
 */

interface Props {
  type?: 'tip' | 'info' | 'related' | 'next' | 'warning';
  title?: string;
  link?: string;
  linkText?: string;
  icon?: string;
}

const { 
  type = 'info',
  title,
  link,
  linkText = 'Learn more',
  icon
} = Astro.props;

const icons: Record<string, string> = {
  tip: 'fas fa-lightbulb',
  info: 'fas fa-info-circle',
  related: 'fas fa-link',
  next: 'fas fa-arrow-right',
  warning: 'fas fa-exclamation-triangle'
};

const calloutIcon = icon || icons[type] || icons.info;
---

<aside class={`inline-callout callout-${type}`} role="note">
  <div class="callout-icon">
    <i class={calloutIcon}></i>
  </div>
  <div class="callout-content">
    {title && <strong class="callout-title">{title}</strong>}
    <p class="callout-text">
      <slot />
    </p>
    {link && (
      <a href={link} class="callout-link">
        {linkText}
        <i class="fas fa-arrow-right"></i>
      </a>
    )}
  </div>
</aside>

<style>
  .inline-callout {
    display: flex;
    gap: 1rem;
    padding: 1.25rem;
    margin: 1.5rem 0;
    border-radius: 0.75rem;
    border-left: 4px solid;
  }

  .callout-tip {
    background: rgba(212, 165, 76, 0.1);
    border-left-color: var(--gold, #d4a54c);
  }

  .callout-info {
    background: rgba(14, 43, 72, 0.05);
    border-left-color: var(--primary-navy, #0E2B48);
  }

  .callout-related {
    background: rgba(255, 22, 84, 0.05);
    border-left-color: var(--accent-coral, #FF1654);
  }

  .callout-next {
    background: rgba(37, 211, 102, 0.08);
    border-left-color: #25D366;
  }

  .callout-warning {
    background: rgba(255, 193, 7, 0.1);
    border-left-color: #ffc107;
  }

  .callout-icon {
    flex-shrink: 0;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    font-size: 1rem;
  }

  .callout-tip .callout-icon {
    background: rgba(212, 165, 76, 0.2);
    color: var(--gold, #d4a54c);
  }

  .callout-info .callout-icon {
    background: rgba(14, 43, 72, 0.1);
    color: var(--primary-navy, #0E2B48);
  }

  .callout-related .callout-icon {
    background: rgba(255, 22, 84, 0.1);
    color: var(--accent-coral, #FF1654);
  }

  .callout-next .callout-icon {
    background: rgba(37, 211, 102, 0.15);
    color: #25D366;
  }

  .callout-warning .callout-icon {
    background: rgba(255, 193, 7, 0.2);
    color: #e6a700;
  }

  .callout-content {
    flex: 1;
    min-width: 0;
  }

  .callout-title {
    display: block;
    font-size: 0.95rem;
    font-weight: 700;
    color: var(--text-primary, #1a1a1a);
    margin-bottom: 0.25rem;
  }

  .callout-text {
    font-size: 0.9rem;
    line-height: 1.6;
    color: var(--text-muted, #5a6a7a);
    margin: 0;
  }

  .callout-link {
    display: inline-flex;
    align-items: center;
    gap: 0.375rem;
    margin-top: 0.75rem;
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--accent-coral, #FF1654);
    text-decoration: none;
    transition: gap 0.2s ease;
  }

  .callout-link:hover {
    gap: 0.625rem;
    text-decoration: underline;
  }

  .callout-link i {
    font-size: 0.7rem;
  }

  @media (max-width: 768px) {
    .inline-callout {
      padding: 1rem;
      gap: 0.75rem;
    }

    .callout-icon {
      width: 28px;
      height: 28px;
      font-size: 0.875rem;
    }

    .callout-title {
      font-size: 0.9rem;
    }

    .callout-text {
      font-size: 0.85rem;
    }
  }

  :global(body.theme-dark) .callout-tip {
    background: rgba(212, 165, 76, 0.15);
  }

  :global(body.theme-dark) .callout-info {
    background: rgba(14, 43, 72, 0.4);
  }

  :global(body.theme-dark) .callout-related {
    background: rgba(255, 22, 84, 0.12);
  }

  :global(body.theme-dark) .callout-next {
    background: rgba(37, 211, 102, 0.12);
  }

  :global(body.theme-dark) .callout-warning {
    background: rgba(255, 193, 7, 0.15);
  }

  :global(body.theme-dark) .callout-title {
    color: #e6edf3;
  }

  :global(body.theme-dark) .callout-text {
    color: #8b949e;
  }

  :global(body.theme-dark) .callout-info .callout-icon {
    background: rgba(255, 255, 255, 0.1);
    color: #8b949e;
  }
</style>
